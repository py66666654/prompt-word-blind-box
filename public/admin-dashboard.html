<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>提示词盲盒 - 管理员后台</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin-styles.css">
    <!-- 引入字体图标 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
</head>
<body class="admin-body">
    <div class="admin-container">
        <!-- 侧边导航栏 -->
        <aside class="admin-sidebar">
            <div class="admin-logo">
                <h2>提示词盲盒</h2>
                <span>管理平台</span>
            </div>
            <nav class="admin-nav">
                <ul>
                    <li><a href="#dashboard" class="active"><i class="bi bi-speedometer2"></i> 仪表盘</a></li>
                    <li><a href="#prompts" data-section="prompts"><i class="bi bi-card-text"></i> 提示词管理</a></li>
                    <li><a href="#users"><i class="bi bi-people"></i> 用户管理</a></li>
                    <li><a href="#content-moderation"><i class="bi bi-shield-check"></i> 内容审核</a></li>
                    <li><a href="#categories"><i class="bi bi-tags"></i> 分类管理</a></li>
                    <li><a href="#settings"><i class="bi bi-gear"></i> 系统设置</a></li>
                </ul>
            </nav>
            <div class="admin-user">
                <div class="admin-user-avatar">
                    <img src="https://placehold.co/50x50" alt="管理员头像">
                </div>
                <div class="admin-user-info">
                    <h4 class="admin-username">管理员</h4>
                    <span class="admin-role">超级管理员</span>
                </div>
                <a href="#logout" class="admin-logout"><i class="bi bi-box-arrow-right"></i></a>
            </div>
        </aside>

        <!-- 主内容区域 -->
        <main class="admin-main">
            <!-- 顶部导航栏 -->
            <header class="admin-header">
                <div class="admin-search">
                    <i class="bi bi-search"></i>
                    <input type="text" placeholder="搜索...">
                </div>
                <div class="admin-actions">
                    <a href="#notifications" class="admin-notification">
                        <i class="bi bi-bell"></i>
                        <span class="notification-badge">3</span>
                    </a>
                    <a href="/" class="admin-to-frontend">
                        <i class="bi bi-arrow-left-circle"></i>
                        <span>返回前台</span>
                    </a>
                </div>
            </header>

            <!-- 内容区域 -->
            <div class="admin-content-wrapper">
                <!-- 仪表盘区域 -->
                <section id="dashboard-section" class="admin-section">
                    <h2 class="section-title">仪表盘</h2>
                    <div class="dashboard-cards">
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="bi bi-card-text"></i></div>
                            <div class="card-info">
                                <h3>提示词总数</h3>
                                <p class="card-number">2,534</p>
                            </div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="bi bi-people"></i></div>
                            <div class="card-info">
                                <h3>用户总数</h3>
                                <p class="card-number">1,278</p>
                            </div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="bi bi-bar-chart"></i></div>
                            <div class="card-info">
                                <h3>今日抽卡次数</h3>
                                <p class="card-number">357</p>
                            </div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon"><i class="bi bi-flag"></i></div>
                            <div class="card-info">
                                <h3>待审核内容</h3>
                                <p class="card-number">12</p>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-charts">
                        <div class="chart-container">
                            <h3>用户增长趋势</h3>
                            <div class="chart-placeholder">图表区域</div>
                        </div>
                        <div class="chart-container">
                            <h3>提示词类型分布</h3>
                            <div class="chart-placeholder">图表区域</div>
                        </div>
                    </div>

                    <div class="recent-activity">
                        <h3>最近活动</h3>
                        <ul class="activity-list">
                            <li>
                                <span class="activity-time">10:25</span>
                                <span class="activity-text">管理员添加了新提示词: "微缩城市模型，极致细节的建筑群..."</span>
                            </li>
                            <li>
                                <span class="activity-time">09:40</span>
                                <span class="activity-text">用户 user123 举报了内容</span>
                            </li>
                            <li>
                                <span class="activity-time">昨天</span>
                                <span class="activity-text">自动生成了15条AI提示词</span>
                            </li>
                            <li>
                                <span class="activity-time">昨天</span>
                                <span class="activity-text">添加了新分类: "建筑风格"</span>
                            </li>
                        </ul>
                    </div>
                </section>

                <!-- 提示词管理区域 -->
                <section id="prompts-section" class="admin-section" style="display: none;">
                    <div class="section-header">
                        <h2 class="section-title">提示词管理</h2>
                        <div class="section-actions">
                            <button id="add-prompt-btn" class="action-button primary">
                                <i class="bi bi-plus-circle"></i> 添加提示词
                            </button>
                            <button id="generate-ai-prompt-btn" class="action-button secondary">
                                <i class="bi bi-magic"></i> 生成AI提示词
                            </button>
                            <button id="batch-import-btn" class="action-button">
                                <i class="bi bi-upload"></i> 批量导入
                            </button>
                        </div>
                    </div>

                    <div class="filter-panel">
                        <div class="filter-group">
                            <label for="category-filter">分类:</label>
                            <select id="category-filter">
                                <option value="">全部分类</option>
                                <option value="1">人物</option>
                                <option value="2">风景</option>
                                <option value="3">艺术风格</option>
                                <option value="4">概念艺术</option>
                                <option value="5">科幻</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="type-filter">类型:</label>
                            <select id="type-filter">
                                <option value="">全部类型</option>
                                <option value="1">图像</option>
                                <option value="2">文本</option>
                                <option value="3">视频</option>
                                <option value="4">音频</option>
                                <option value="5">Agent</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="rarity-filter">稀有度:</label>
                            <select id="rarity-filter">
                                <option value="">全部稀有度</option>
                                <option value="1">普通</option>
                                <option value="2">优质</option>
                                <option value="3">精品</option>
                                <option value="4">珍贵</option>
                                <option value="5">稀有</option>
                                <option value="6">传说</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="status-filter">状态:</label>
                            <select id="status-filter">
                                <option value="">全部状态</option>
                                <option value="approved">已审核</option>
                                <option value="pending">待审核</option>
                                <option value="rejected">已拒绝</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="ai-filter">来源:</label>
                            <select id="ai-filter">
                                <option value="">全部来源</option>
                                <option value="true">AI生成</option>
                                <option value="false">手动添加</option>
                            </select>
                        </div>
                        <button id="apply-filter" class="action-button">
                            <i class="bi bi-funnel"></i> 应用筛选
                        </button>
                    </div>

                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th><input type="checkbox" id="select-all"></th>
                                    <th>ID</th>
                                    <th>预览</th>
                                    <th>提示词内容</th>
                                    <th>分类</th>
                                    <th>类型</th>
                                    <th>稀有度</th>
                                    <th>质量分</th>
                                    <th>来源</th>
                                    <th>状态</th>
                                    <th>创建时间</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="prompts-table-body">
                                <!-- 提示词列表将通过JS动态加载 -->
                                <tr>
                                    <td><input type="checkbox" class="row-select"></td>
                                    <td>1</td>
                                    <td><img src="https://placehold.co/60x40" alt="预览图" class="preview-thumbnail"></td>
                                    <td class="prompt-text">一位身穿华丽宫廷服饰的年轻女子，站在古堡阳台上...</td>
                                    <td>人物</td>
                                    <td>图像</td>
                                    <td><span class="rarity-badge" style="background-color: #55AA55;">优质</span></td>
                                    <td>65</td>
                                    <td>手动添加</td>
                                    <td><span class="status-badge approved">已审核</span></td>
                                    <td>2023-05-10</td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="icon-button edit-button" data-id="1" title="编辑">
                                                <i class="bi bi-pencil"></i>
                                            </button>
                                            <button class="icon-button view-button" data-id="1" title="查看">
                                                <i class="bi bi-eye"></i>
                                            </button>
                                            <button class="icon-button delete-button" data-id="1" title="删除">
                                                <i class="bi bi-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td><input type="checkbox" class="row-select"></td>
                                    <td>2</td>
                                    <td><img src="https://placehold.co/60x40" alt="预览图" class="preview-thumbnail"></td>
                                    <td class="prompt-text">潮汐涌动的海岸线，岩石形成的自然拱门，夕阳映照下金色的海面...</td>
                                    <td>风景</td>
                                    <td>图像</td>
                                    <td><span class="rarity-badge" style="background-color: #5555FF;">精品</span></td>
                                    <td>78</td>
                                    <td>手动添加</td>
                                    <td><span class="status-badge approved">已审核</span></td>
                                    <td>2023-05-09</td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="icon-button edit-button" data-id="2" title="编辑">
                                                <i class="bi bi-pencil"></i>
                                            </button>
                                            <button class="icon-button view-button" data-id="2" title="查看">
                                                <i class="bi bi-eye"></i>
                                            </button>
                                            <button class="icon-button delete-button" data-id="2" title="删除">
                                                <i class="bi bi-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td><input type="checkbox" class="row-select"></td>
                                    <td>3</td>
                                    <td><img src="https://placehold.co/60x40" alt="预览图" class="preview-thumbnail"></td>
                                    <td class="prompt-text">微缩城市模型，极致细节的建筑群，人们如蚂蚁般穿行...</td>
                                    <td>风景</td>
                                    <td>图像</td>
                                    <td><span class="rarity-badge" style="background-color: #AA55AA;">珍贵</span></td>
                                    <td>88</td>
                                    <td>手动添加</td>
                                    <td><span class="status-badge pending">待审核</span></td>
                                    <td>2023-05-08</td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="icon-button edit-button" data-id="3" title="编辑">
                                                <i class="bi bi-pencil"></i>
                                            </button>
                                            <button class="icon-button view-button" data-id="3" title="查看">
                                                <i class="bi bi-eye"></i>
                                            </button>
                                            <button class="icon-button delete-button" data-id="3" title="删除">
                                                <i class="bi bi-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td><input type="checkbox" class="row-select"></td>
                                    <td>4</td>
                                    <td><img src="https://placehold.co/60x40" alt="预览图" class="preview-thumbnail"></td>
                                    <td class="prompt-text">创作一段冥想背景音乐，包含柔和的自然声音，如轻柔的流水声和远处的鸟鸣...</td>
                                    <td>概念艺术</td>
                                    <td>音频</td>
                                    <td><span class="rarity-badge" style="background-color: #5555FF;">精品</span></td>
                                    <td>71</td>
                                    <td>AI生成</td>
                                    <td><span class="status-badge approved">已审核</span></td>
                                    <td>2023-05-07</td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="icon-button edit-button" data-id="4" title="编辑">
                                                <i class="bi bi-pencil"></i>
                                            </button>
                                            <button class="icon-button view-button" data-id="4" title="查看">
                                                <i class="bi bi-eye"></i>
                                            </button>
                                            <button class="icon-button delete-button" data-id="4" title="删除">
                                                <i class="bi bi-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="pagination">
                        <span class="pagination-info">显示 1-10 共 120 条</span>
                        <div class="pagination-controls">
                            <button class="pagination-button" disabled><i class="bi bi-chevron-double-left"></i></button>
                            <button class="pagination-button" disabled><i class="bi bi-chevron-left"></i></button>
                            <button class="pagination-button active">1</button>
                            <button class="pagination-button">2</button>
                            <button class="pagination-button">3</button>
                            <span class="pagination-ellipsis">...</span>
                            <button class="pagination-button">12</button>
                            <button class="pagination-button"><i class="bi bi-chevron-right"></i></button>
                            <button class="pagination-button"><i class="bi bi-chevron-double-right"></i></button>
                        </div>
                    </div>
                </section>

                <!-- 其他部分（用户管理、内容审核等）在这里添加 -->
            </div>
        </main>
    </div>

    <!-- 添加/编辑提示词弹窗 -->
    <div id="prompt-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">添加提示词</h3>
                <button class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <form id="prompt-form">
                    <input type="hidden" id="prompt-id">
                    
                    <div class="form-group">
                        <label for="prompt-text">提示词内容 <span class="required">*</span></label>
                        <textarea id="prompt-text" class="form-control" rows="6" required></textarea>
                        <div class="char-counter"><span id="char-count">0</span>/2000</div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group half">
                            <label for="prompt-category">分类 <span class="required">*</span></label>
                            <select id="prompt-category" class="form-control" required>
                                <option value="">选择分类</option>
                                <option value="1">人物</option>
                                <option value="2">风景</option>
                                <option value="3">艺术风格</option>
                                <option value="4">概念艺术</option>
                                <option value="5">科幻</option>
                            </select>
                        </div>
                        <div class="form-group half">
                            <label for="prompt-type">类型 <span class="required">*</span></label>
                            <select id="prompt-type" class="form-control" required>
                                <option value="">选择类型</option>
                                <option value="1">图像</option>
                                <option value="2">文本</option>
                                <option value="3">视频</option>
                                <option value="4">音频</option>
                                <option value="5">Agent</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group half">
                            <label for="prompt-quality">质量分数 <span class="required">*</span></label>
                            <input type="number" id="prompt-quality" class="form-control" min="0" max="100" value="50" required>
                            <div class="range-slider">
                                <input type="range" id="quality-slider" min="0" max="100" value="50">
                                <div class="quality-levels">
                                    <span>普通</span>
                                    <span>优质</span>
                                    <span>精品</span>
                                    <span>珍贵</span>
                                    <span>稀有</span>
                                    <span>传说</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group half">
                            <label for="prompt-rarity">稀有度</label>
                            <input type="text" id="prompt-rarity" class="form-control" disabled>
                            <div id="rarity-indicator" class="rarity-indicator">普通</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="prompt-preview">预览图URL</label>
                        <input type="text" id="prompt-preview" class="form-control" placeholder="https://example.com/image.jpg">
                        <div class="preview-upload">
                            <span>或</span>
                            <button type="button" id="upload-preview" class="secondary-button">上传图片</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="prompt-source">来源</label>
                        <input type="text" id="prompt-source" class="form-control" placeholder="例如: Midjourney优质案例">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group full">
                            <div class="checkbox-group">
                                <input type="checkbox" id="prompt-ai-generated">
                                <label for="prompt-ai-generated">AI生成</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="prompt-status">状态</label>
                        <select id="prompt-status" class="form-control">
                            <option value="approved">已审核</option>
                            <option value="pending">待审核</option>
                            <option value="rejected">已拒绝</option>
                        </select>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="action-button" id="cancel-prompt">取消</button>
                        <button type="submit" class="action-button primary" id="save-prompt">保存</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 查看提示词弹窗 -->
    <div id="view-prompt-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>查看提示词</h3>
                <button class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="view-prompt-container">
                    <div class="view-prompt-preview">
                        <img src="https://placehold.co/600x400" alt="提示词预览" id="view-preview-image">
                    </div>
                    <div class="view-prompt-details">
                        <div class="detail-item">
                            <span class="detail-label">ID:</span>
                            <span class="detail-value" id="view-prompt-id">1</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">提示词内容:</span>
                            <div class="detail-value prompt-content" id="view-prompt-text">一位身穿华丽宫廷服饰的年轻女子，站在古堡阳台上...</div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-item half">
                                <span class="detail-label">分类:</span>
                                <span class="detail-value" id="view-prompt-category">人物</span>
                            </div>
                            <div class="detail-item half">
                                <span class="detail-label">类型:</span>
                                <span class="detail-value" id="view-prompt-type">图像</span>
                            </div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-item half">
                                <span class="detail-label">质量分数:</span>
                                <span class="detail-value" id="view-prompt-quality">65</span>
                            </div>
                            <div class="detail-item half">
                                <span class="detail-label">稀有度:</span>
                                <span class="detail-value" id="view-prompt-rarity">
                                    <span class="rarity-badge" style="background-color: #55AA55;">优质</span>
                                </span>
                            </div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-item half">
                                <span class="detail-label">来源:</span>
                                <span class="detail-value" id="view-prompt-source">手动添加</span>
                            </div>
                            <div class="detail-item half">
                                <span class="detail-label">状态:</span>
                                <span class="detail-value" id="view-prompt-status">
                                    <span class="status-badge approved">已审核</span>
                                </span>
                            </div>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">创建时间:</span>
                            <span class="detail-value" id="view-prompt-created">2023-05-10 14:30:25</span>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="action-button" id="close-view">关闭</button>
                    <button class="action-button secondary" id="edit-from-view">编辑</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 确认删除弹窗 -->
    <div id="confirm-delete-modal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h3>确认删除</h3>
                <button class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <p>确定要删除这条提示词吗？此操作不可撤销。</p>
                <div class="modal-actions centered">
                    <button class="action-button" id="cancel-delete">取消</button>
                    <button class="action-button danger" id="confirm-delete">删除</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 批量生成AI提示词弹窗 -->
    <div id="generate-ai-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>生成AI提示词</h3>
                <button class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <form id="generate-ai-form">
                    <div class="form-group">
                        <label for="ai-prompt-type">提示词类型</label>
                        <select id="ai-prompt-type" class="form-control">
                            <option value="">随机类型</option>
                            <option value="image">图像</option>
                            <option value="text">文本</option>
                            <option value="video">视频</option>
                            <option value="audio">音频</option>
                            <option value="agent">Agent</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="ai-prompt-count">生成数量</label>
                        <input type="number" id="ai-prompt-count" class="form-control" min="1" max="20" value="1">
                    </div>
                    
                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="ai-prompt-auto-approve">
                        <label for="ai-prompt-auto-approve">自动审核通过</label>
                    </div>
                    
                    <div class="generation-preview">
                        <h4>生成预览</h4>
                        <div id="generation-preview-content">
                            <p>点击"生成预览"查看一个示例</p>
                        </div>
                        <button type="button" id="preview-generation" class="secondary-button">生成预览</button>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="action-button" id="cancel-generation">取消</button>
                        <button type="submit" class="action-button primary" id="start-generation">开始生成</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 批量导入弹窗 -->
    <div id="batch-import-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>批量导入提示词</h3>
                <button class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="import-options">
                    <div class="import-option">
                        <h4>从CSV文件导入</h4>
                        <p>上传CSV文件批量导入提示词</p>
                        <button class="secondary-button" id="csv-upload-btn">选择CSV文件</button>
                        <input type="file" id="csv-file-input" accept=".csv" style="display: none;">
                    </div>
                    <div class="import-option">
                        <h4>从JSON文件导入</h4>
                        <p>上传JSON文件批量导入提示词</p>
                        <button class="secondary-button" id="json-upload-btn">选择JSON文件</button>
                        <input type="file" id="json-file-input" accept=".json" style="display: none;">
                    </div>
                </div>
                
                <div class="import-template">
                    <h4>下载导入模板</h4>
                    <div class="template-buttons">
                        <a href="#" class="template-button">CSV模板</a>
                        <a href="#" class="template-button">JSON模板</a>
                    </div>
                </div>
                
                <div class="textarea-import">
                    <h4>直接粘贴提示词</h4>
                    <p>每行一个提示词，或粘贴JSON格式数据</p>
                    <textarea id="import-textarea" rows="6" placeholder="在此粘贴提示词内容..."></textarea>
                </div>
                
                <div class="import-settings">
                    <h4>导入设置</h4>
                    <div class="form-row">
                        <div class="form-group half">
                            <label for="import-category">默认分类</label>
                            <select id="import-category" class="form-control">
                                <option value="">选择分类</option>
                                <option value="1">人物</option>
                                <option value="2">风景</option>
                                <option value="3">艺术风格</option>
                                <option value="4">概念艺术</option>
                                <option value="5">科幻</option>
                            </select>
                        </div>
                        <div class="form-group half">
                            <label for="import-type">默认类型</label>
                            <select id="import-type" class="form-control">
                                <option value="">选择类型</option>
                                <option value="1">图像</option>
                                <option value="2">文本</option>
                                <option value="3">视频</option>
                                <option value="4">音频</option>
                                <option value="5">Agent</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="import-auto-approve">
                        <label for="import-auto-approve">自动审核通过</label>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="action-button" id="cancel-import">取消</button>
                    <button class="action-button primary" id="start-import">开始导入</button>
                </div>
            </div>
        </div>
    </div>
    
    <div id="toast-container" class="toast-container"></div>

    <script src="config.js"></script>
    <script src="api.js"></script>
    <script src="admin-script.js"></script>
</body>
</html>